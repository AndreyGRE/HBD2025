import { useEffect, useState } from "react";
import Exp1 from "../images/ExpoZone/Exp_1.png";
import Exp2 from "../images/ExpoZone/Exp_2.png";
import Exp3 from "../images/ExpoZone/Exp_3.png";
import Exp4 from "../images/ExpoZone/Exp_4.png";

function ExpoZone() {
    interface originalImages {
        imageUrls: string;
    }
    interface duplicatedImages {
        imageUrls: string;
    }
    const originalImages = [Exp1, Exp2, Exp3, Exp4];
    const [currentIndex, setCurrentIndex] = useState(0);
    // Дублируем изображения для бесконечного скролла
    const duplicatedImages = [...originalImages, ...originalImages];
    // количество картинок в зависимости от экрана
    const [imagesPerView, setImagesPerView] = useState(4);
    useEffect(() => {
        const updateImagesPerView = () => {
            if (window.innerWidth < 640) {
                setImagesPerView(2); // мобилки
            } else if (window.innerWidth < 1024) {
                setImagesPerView(4); // планшеты
            } else if (window.innerWidth < 1440) {
                setImagesPerView(4); // десктоп
            } else {
                setImagesPerView(4); // большие экраны
            }
        };

        updateImagesPerView();
        window.addEventListener("resize", updateImagesPerView);
        return () => window.removeEventListener("resize", updateImagesPerView);
    }, []);

    // автопрокрутка
    useEffect(() => {
        const interval = setInterval(() => {
            setCurrentIndex((prev) => {
                const nextIndex = prev + 1;
                if (nextIndex >= originalImages.length) {
                    return 0;
                }
                return nextIndex;
            });
        }, 3000);

        return () => clearInterval(interval);
    }, [originalImages.length]);

    return (
        <div className="mt-[100px] xl:mt-[250px] relative ">
            <div className="absolute right-0 xl:-top-60 -top-20 opacity-35 z-0 xl:h-[490px] xl:w-[295px] w-[25%] h-[25%] ">
                <svg viewBox="0 0 295 490" fill="none">
                    <path
                        d="M154.365 15.7152C153.288 14.3565 152.94 2.42984 153.216 0.333912C157.231 1.38086 161.617 1.96536 165.728 2.66321C212.678 10.6305 259.221 21.2506 305.35 33.0442C315.75 35.7031 326.195 39.5849 336.55 41.9376C337.226 44.1913 332.634 56.7589 331.362 59.0987C324.434 71.8397 319.076 85.3632 313.185 98.5994C287.796 155.65 266.318 214.137 244.936 272.757L231.553 309.947C214.569 356.795 200.508 404.766 187.908 452.979C186.476 458.458 185.359 464.239 183.774 469.635C185.936 470.413 188.188 471.222 190.337 472.022C194.787 473.68 196.06 474.601 196.87 479.131C195.313 479.998 193.863 480.56 192.22 481.213C185.744 483.788 179.208 486.054 172.962 489.164C164.821 484.778 157.043 480.498 148.812 476.219C145.166 478.039 141.785 479.362 138.104 481.018C133.192 479.122 128.018 476.118 124.546 472.097C127.423 471.237 131.957 469.852 134.707 468.725C119.465 460.649 103.868 453.33 88.4368 445.656L60.0526 431.734C55.1915 429.385 49.6559 426.571 44.709 424.455C41.768 426.087 36.0109 427.488 32.5835 427.837C28.3668 428.267 22.4916 425.014 19.9266 421.584L19.9273 421.026C21.5247 420.263 28.5185 419.015 30.9455 418.347C20.62 413.923 9.83131 409.266 0.105367 403.651C0.578938 400.623 1.57052 398.154 3.25186 395.628C5.05076 392.925 7.97986 390.009 11.4881 390.665C13.6132 391.062 15.7669 392.412 17.9452 392.699C18.5145 392.136 18.5361 391.731 18.7387 390.955L19.5987 390.428C19.1365 391.558 18.7525 392.186 19.1128 393.293C21.1508 394.54 25.7801 396.457 28.1119 397.5L42.6444 404.103L96.4927 428.206C120.725 439.105 144.871 450.391 168.675 462.207C173.468 464.586 178.072 467.141 182.983 469.309C184.026 463.105 185.99 455.944 187.504 449.791C196.674 412.508 208.228 375.54 220.157 339.054C228.923 312.239 239.04 285.716 248.327 259.091C250.205 254.858 255.949 239.437 256.983 235.27C255.775 237.3 253.733 242.961 252.811 245.451C251.005 250.327 248.875 255.528 247.275 260.43C243.128 272.87 237.834 285.061 233.55 297.509C215.607 349.646 195.332 401.422 182.7 455.165C182.189 457.338 180.95 460.469 180.735 462.517C181.436 463.235 181.967 463.475 181.979 464.211C179.678 464.737 173.142 461.139 170.682 459.96L155.049 452.469C117.497 434.7 80.1549 416.811 42.0022 400.313C34.958 397.266 27.9161 393.933 21.0716 390.464L21.5055 390.18C24.9726 391.181 30.9813 393.94 34.5354 395.462L56.5675 404.829C84.5867 416.625 112.899 429.698 140.375 442.76C153.019 448.77 166.655 455.076 179.009 461.535C180.122 452.961 183.314 443.012 185.363 434.524C191.797 407.878 201.935 382.536 210.621 356.645C230.547 297.25 253.205 238.934 276.564 180.82C292.935 140.091 309.027 98.1349 329.057 59.0505C312.696 53.3605 292.845 48.2391 276.107 43.7071C250.697 36.8263 225.021 30.6369 199.317 24.955L171.38 18.9581C166.477 17.9343 159.96 16.3263 155.097 15.8788L154.365 15.7152ZM328.549 41.4401C291.803 31.6883 255.518 22.9129 218.37 14.8007C197.169 10.1713 175.365 6.20744 154.316 1.47825C154.119 3.80869 154.96 11.4225 155.095 14.5864C155.713 15.0829 156.334 14.9936 157.259 15.0471C211.138 24.5717 264.326 36.9849 316.413 53.8979C317.621 54.2908 328.864 58.1221 329.251 57.9166C328.166 55.537 332.655 45.6829 333.798 43.0514C332.572 42.6538 329.675 41.6416 328.549 41.4401ZM11.4092 391.67C6.14598 391.958 2.70527 398.814 0.980036 403.142C5.20922 404.903 9.22222 406.954 13.3859 408.792C62.8413 430.625 111.868 453.726 159.661 479.004C163.982 481.29 168.244 484.074 172.661 486.127L174.196 483.508C177.601 478.178 181.266 475.273 187.56 474.034C182.217 472.153 176.077 468.47 170.915 465.871C125.006 442.747 77.7379 422.566 31.2037 400.769C24.897 397.816 17.9342 393.946 11.4092 391.67ZM32.8948 419.006C29.5424 419.911 25.2211 421.203 21.8498 421.732C24.7674 423.621 28.2908 426.255 31.7428 426.532L43.3688 423.742C41.4738 422.834 34.691 419.484 32.8948 419.006ZM192.823 476.256C187.199 476.029 183.078 477.599 178.851 481.387C177.982 482.165 176.093 483.926 175.935 485.012C176.778 485.045 176.445 485.081 177.263 484.693C181.632 482.99 189.485 480.15 193.995 478.3C194.11 478.08 194.225 477.859 194.34 477.639C194.034 476.733 193.811 476.533 192.823 476.256ZM135.782 469.356C132.89 470.542 130.141 471.599 127.208 472.68C128.85 473.87 136.193 478.745 138.085 478.886C141.334 476.877 143.631 476.282 147.244 475.107C143.884 473.32 139.284 470.748 135.782 469.356Z"
                        fill="url(#paint0_linear_3663_1050)"
                    />
                    <path
                        d="M154.365 15.7152L155.097 15.8788C154.593 18.5273 153.781 21.3156 152.979 23.8987C145.349 48.4928 136.374 72.7134 126.927 96.6646C126.449 97.8749 126.008 99.1002 125.398 100.246L125.229 99.9408L124.465 100.698C126.49 95.782 138.351 66.1317 138.365 62.6748L135.823 68.9089L135.214 68.8773C140.653 56.9552 145.075 44.5761 149.425 32.2204C150.678 28.6637 154.098 18.9794 154.365 15.7152Z"
                        fill="url(#paint1_linear_3663_1050)"
                    />
                    <path
                        d="M135.214 68.8773L135.823 68.9089C131.93 79.1686 126.422 92.1464 123.622 102.723C123.926 102.038 124.231 101.409 124.465 100.698L125.229 99.9408L125.398 100.246C119.179 116.095 112.982 132.01 106.613 147.794C103.621 155.21 99.9748 162.336 96.9623 169.739C91.7213 182.616 87.2581 196.646 81.4918 209.246C81.3555 208.356 81.5198 207.939 81.668 207.025C84.8812 199.063 90.2917 185.228 92.5363 177.014C91.9162 177.827 90.5491 181.203 90.0668 182.29C85.7672 191.983 82.3371 201.865 78.9242 211.896C78.237 213.405 77.7344 214.262 77.5518 215.922L77.9317 216.802C74.543 224.619 70.0877 236.695 67.4372 244.843L66.8048 244.845C67.1362 243.827 67.9061 241.847 67.884 240.902C67.508 239.944 68.1298 238.479 68.4531 237.38C74.0433 220.44 80.8315 203.039 87.4783 186.464C89.8052 180.74 92.8111 175.169 95.1196 169.452C98.7968 160.346 101.953 150.999 105.795 141.954L106.212 142.412C105.888 143.896 105.401 144.881 105.097 146.199C104.545 147.896 101.261 157.701 101.197 158.791C103.548 153.978 105.792 147.701 107.671 142.636C110.294 135.566 113.093 128.033 115.375 120.835C116.439 119.727 117.761 116.693 117.183 115.162C118.128 112.582 119.483 109.717 120.503 107.038L135.214 68.8773Z"
                        fill="url(#paint2_linear_3663_1050)"
                    />
                    <path
                        d="M105.795 141.954C107.468 136.203 114.48 120.724 117.183 115.162C117.761 116.693 116.439 119.727 115.375 120.835C112.9 123.892 106.881 141.658 105.097 146.199C105.401 144.881 105.888 143.896 106.212 142.412L105.795 141.954Z"
                        fill="url(#paint3_linear_3663_1050)"
                    />
                    <path
                        d="M78.9242 211.896C78.7896 212.55 78.6711 213.206 78.5495 213.863C79.267 213.193 81.1552 208.275 81.668 207.025C81.5198 207.939 81.3555 208.356 81.4918 209.246C81.0813 210.192 78.4874 215.991 77.9317 216.802L77.5518 215.922C77.7344 214.262 78.237 213.405 78.9242 211.896Z"
                        fill="url(#paint4_linear_3663_1050)"
                    />
                    <path
                        d="M34.8734 331.785C35.4454 330.088 35.9405 328.319 36.4578 326.6C44.0357 301.406 53.11 276.567 62.7192 252.081C64.5585 247.394 66.2947 241.856 68.4531 237.38C68.1298 238.479 67.508 239.944 67.884 240.902C67.0859 242.801 65.968 245.264 65.3594 247.178C64.1621 250.58 62.7851 253.94 61.4853 257.311C52.7478 279.971 44.2472 302.832 37.1644 326.069C36.2941 328.924 35.4327 331.812 34.439 334.619C34.6561 333.589 34.7495 332.834 34.8734 331.785Z"
                        fill="url(#paint5_linear_3663_1050)"
                    />
                    <path
                        d="M66.8048 244.845L67.4372 244.843L60.5402 264.158C60.8915 261.995 61.9015 259.75 62.414 257.336L66.2065 246.311L66.8048 244.845Z"
                        fill="url(#paint6_linear_3663_1050)"
                    />
                    <path
                        d="M32.1589 343.608C35.2793 336.878 36.0215 331.168 38.4262 325.353C35.9293 334.715 33.6825 342.189 30.5338 351.361C27.0315 361.561 21.3078 378.518 20.0261 389.032C20.5137 389.807 20.6152 389.71 21.5055 390.18L21.0716 390.464L19.9816 390.087L19.5987 390.428L18.7387 390.955C19.194 388.257 19.6744 385.58 20.1795 382.89C22.7228 369.356 27.6565 356.75 32.0548 343.759L32.1589 343.608Z"
                        fill="url(#paint7_linear_3663_1050)"
                    />
                    <defs>
                        <linearGradient
                            id="paint0_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint1_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint2_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint3_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint4_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint5_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint6_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                        <linearGradient
                            id="paint7_linear_3663_1050"
                            x1="678.039"
                            y1="-1498.51"
                            x2="1091.05"
                            y2="-1302.52"
                            gradientUnits="userSpaceOnUse"
                        >
                            <stop offset="0.128556" stop-color="#000023" />
                            <stop
                                offset="0.497073"
                                stop-color="#7E82D7"
                                stop-opacity="0.9"
                            />
                            <stop offset="0.870922" stop-color="#E95521" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div className="flex flex-col  justify-center z-10">
                <div className="ml-[27px] mb-5  xl:mb-[76px] lg:ml-[107px] xl:ml-[157px] 2xl:ml-[207px] flex gradient flex-col xl:flex-row xl:gap-[264px] gap-[14px] xl:items-center items-start relative">
                    <div className="gradient text-[32px] lg:text-[54px] xl:text-[64px] 2xl:text-[74px] font-[750] xl:text-center text-left">
                        ЭКСПОЗОНА
                    </div>
                    <div className="  text-[18px] lg:text-[19px] xl:text-[20px] font-[450] max-w-[620px] text-left uppercase pr-[120px] ">
                        Новинки материалов и технологий от ключевых игроков
                        строительного рынка
                    </div>
                </div>
                <div className="relative">
                    <div className="max-w-full overflow-hidden z-10">
                        <div
                            className="flex transition-transform duration-500 ease-in-out"
                            style={{
                                transform: `translateX(-${
                                    currentIndex * (100 / imagesPerView)
                                }%)`,
                            }}
                        >
                            {duplicatedImages.map((src, index) => (
                                <div
                                    key={index}
                                    style={{
                                        flex: `0 0 ${100 / imagesPerView}%`,
                                    }}
                                    className=" px-[5px] flex-shrink-0 "
                                >
                                    <div className="relative xl:w-[400px] xl:h-[500px] 2xl:w-[600px] 2xl:h-[600px]  w-full h-[250px] overflow-hidden">
                                        <img
                                            src={src}
                                            alt={`slide-${index}`}
                                            className="w-full h-full object-cover mask-Expo"
                                        />
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div className="-z-1 absolute -left-[30%] flex-shrink-0 w-[1604px] h-[772px] rotate-[-32.855deg] rounded-[1604px] bg-custom-gradient blur-[250px]"></div>
                </div>
            </div>
        </div>
    );
}

export default ExpoZone;
